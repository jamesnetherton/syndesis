#
# Do not edit, this is a generated file.  To regenerate,  run: ./generator/run.sh
#
apiVersion: template.openshift.io/v1
kind: Template
metadata:
  name: syndesis-monitoring
  labels:
    app: syndesis
    syndesis.io/app: syndesis
    syndesis.io/type: infrastructure
    syndesis.io/component: syndesis-monitoring
  annotations:
    openshift.io/display-name: "Fuse Online monitoring stack installation"
    openshift.io/provider-display-name: "Red Hat, Inc."
    description: "Installs Prometheus and Grafana to monitor Fuse Online"
    tags: "fuse-online,syndesis,monitoring"
    iconClass: "icon-rh-integration"
    version: "1.0"
message: |-
  Fuse Online monitoring stack has been installed to ${MONITORING_NAMESPACE}
parameters:
- name: MONITORING_NAMESPACE
  displayName: Monitoring Namespace
  value: application-monitoring
  required: true
  description: Namespace in which the monitoring stack is to be installed.
- name: FUSE_ONLINE_NAMESPACE
  displayName: Fuse Online Namespace
  value: application-monitoring
  required: true
  description: Namespace in which the Fuse Online instance to monitor is installed.
objects:
# Roles
- apiVersion: rbac.authorization.k8s.io/v1beta1
  kind: ClusterRole
  metadata:
    name: prometheus-application-monitoring
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  rules:
  - apiGroups:
    - authentication.k8s.io
    resources:
    - tokenreviews
    verbs:
    - create
  - apiGroups:
    - authorization.k8s.io
    resources:
    - subjectaccessreviews
    verbs:
    - create
  - apiGroups: [""]
    resources:
    - nodes
    - services
    - endpoints
    - pods
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources:
    - configmaps
    verbs: ["get"]
  - nonResourceURLs: ["/metrics"]
    verbs: ["get"]

- apiVersion: rbac.authorization.k8s.io/v1beta1
  kind: ClusterRoleBinding
  metadata:
    name: prometheus-application-monitoring
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: ClusterRole
    name: prometheus-application-monitoring
  subjects:
  - kind: ServiceAccount
    name: prometheus-application-monitoring
    namespace: application-monitoring
  userNames:
  - system:serviceaccount:application-monitoring:prometheus-application-monitoring

- apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRole
  metadata:
    name: prometheus-application-monitoring-operator
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  rules:
  - apiGroups:
    - apiextensions.k8s.io
    resources:
    - customresourcedefinitions
    verbs:
    - '*'
  - apiGroups:
    - monitoring.coreos.com
    resources:
    - alertmanagers
    - prometheuses
    - prometheuses/finalizers
    - alertmanagers/finalizers
    - servicemonitors
    - prometheusrules
    verbs:
    - '*'
  - apiGroups:
    - apps
    resources:
    - statefulsets
    verbs:
    - '*'
  - apiGroups:
    - ""
    resources:
    - configmaps
    - secrets
    verbs:
    - '*'
  - apiGroups:
    - ""
    resources:
    - pods
    verbs:
    - list
    - delete
  - apiGroups:
    - ""
    resources:
    - services
    - endpoints
    - services/finalizers
    verbs:
    - "*"
  - apiGroups:
    - ""
    resources:
    - nodes
    verbs:
    - list
    - watch
  - apiGroups:
    - ""
    resources:
    - namespaces
    verbs:
    - get
    - list
    - watch


- apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRoleBinding
  metadata:
    name: prometheus-application-monitoring-operator
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: ClusterRole
    name: prometheus-application-monitoring-operator
  subjects:
  - kind: ServiceAccount
    name: prometheus-operator
    namespace: application-monitoring
  userNames:
  - system:serviceaccount:application-monitoring:prometheus-operator

# Prometheus
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    name: prometheus-operator
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring

- apiVersion: apps/v1beta2
  kind: Deployment
  metadata:
    labels:
      k8s-app: prometheus-application-operator
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
    name: prometheus-operator
    namespace: ${MONITORING_NAMESPACE}
  spec:
    replicas: 1
    selector:
      matchLabels:
        k8s-app: prometheus-application-operator
    template:
      metadata:
        labels:
          k8s-app: prometheus-application-operator
      spec:
        containers:
          - args:
              - --kubelet-service=kube-system/kubelet
              - --logtostderr=true
              - --config-reloader-image=quay.io/coreos/configmap-reload:v0.0.1
              - --prometheus-config-reloader=quay.io/coreos/prometheus-config-reloader:v0.26.0
              - --namespaces=
            image: quay.io/coreos/prometheus-operator:v0.26.0
            name: prometheus-application-operator
            ports:
              - containerPort: 8080
                name: http
            resources:
              limits:
                cpu: 200m
                memory: 200Mi
              requests:
                cpu: 100m
                memory: 100Mi
            securityContext:
              allowPrivilegeEscalation: false
              readOnlyRootFilesystem: true
        nodeSelector:
          beta.kubernetes.io/os: linux
        securityContext: {}
        serviceAccountName: prometheus-operator

- apiVersion: route.openshift.io/v1
  kind: Route
  metadata:
    name: prometheus-route
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  spec:
    port:
      targetPort: web
    tls:
      termination: edge
    to:
      kind: Service
      name: prometheus
    wildcardPolicy: None

- apiVersion: v1
  kind: ServiceAccount
  metadata:
    name: prometheus-application-monitoring
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring

- apiVersion: v1
  kind: Service
  metadata:
    name: prometheus
    namespace: ${MONITORING_NAMESPACE}
    labels:
      application-monitoring: "true"
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  spec:
    type: ClusterIP
    ports:
      - name: web
        port: 9090
        protocol: TCP
        targetPort: web
    selector:
      app: prometheus
    sessionAffinity: None

- apiVersion: monitoring.coreos.com/v1
  kind: Prometheus
  metadata:
    name: prometheus
    namespace: ${MONITORING_NAMESPACE}
    labels:
      prometheus: prometheus
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  spec:
    alerting:
      alertmanagers:
        - name: alertmanager
          namespace: ${MONITORING_NAMESPACE}
          port: web
    resources:
      requests:
        memory: 400Mi
    serviceAccountName: prometheus-application-monitoring
    serviceMonitorNamespaceSelector:
    # TODO: Make this configurable - maybe addons should be part of this template
      matchLabels:
        monitoring-key: middleware
    serviceMonitorSelector:
      matchLabels:
        monitoring-key: middleware
    ruleSelector:
      matchLabels:
        monitoring-key: middleware
    ruleNamespaceSelector:
      matchLabels:
        monitoring-key: middleware

- apiVersion: monitoring.coreos.com/v1
  kind: ServiceMonitor
  metadata:
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/component: syndesis-db-metrics
      syndesis.io/type: infrastructure
      monitoring-key: middleware
      application-monitoring: "true"
    name: syndesis-db-metrics
    namespace: ${FUSE_ONLINE_NAMESPACE}
  spec:
    endpoints:
    - targetPort: metrics
    selector:
      matchLabels:
        syndesis.io/component: syndesis-db
  
- apiVersion: monitoring.coreos.com/v1
  kind: ServiceMonitor
  metadata:
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/component: syndesis-meta
      syndesis.io/type: infrastructure
      monitoring-key: middleware
      application-monitoring: "true"
    name: syndesis-meta
    namespace: ${FUSE_ONLINE_NAMESPACE}
  spec:
    endpoints:
    - targetPort: metrics
    selector:
      matchLabels:
        syndesis.io/component: syndesis-meta
  
- apiVersion: monitoring.coreos.com/v1
  kind: ServiceMonitor
  metadata:
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/component: syndesis-prometheus
      syndesis.io/type: infrastructure
      monitoring-key: middleware
      application-monitoring: "true"
    name: syndesis-prometheus
    namespace: ${FUSE_ONLINE_NAMESPACE}
  spec:
    endpoints:
      - honorLabels: true
        interval: 30s
        path: /federate
        params:
          'match[]':
          - '{job="integration-pods"}'
        port: prometheus
    selector:
      matchLabels:
        syndesis.io/component: syndesis-prometheus
  
- apiVersion: monitoring.coreos.com/v1
  kind: ServiceMonitor
  metadata:
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/component: syndesis-server
      syndesis.io/type: infrastructure
      monitoring-key: middleware
      application-monitoring: "true"
    name: syndesis-server
    namespace: ${FUSE_ONLINE_NAMESPACE}
  spec:
    endpoints:
    - targetPort: metrics
    selector:
      matchLabels:
        syndesis.io/component: syndesis-server
  


# Alertmanager
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    name: alertmanager
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring

- apiVersion: v1
  stringData:
    alertmanager.yaml: |
      global:
        resolve_timeout: 5m
      route:
        group_wait: 10s
        group_interval: 30s
        repeat_interval: 12h
        receiver: default
        routes:
        - match:
            alertname: DeadMansSwitch
          repeat_interval: 5m
          receiver: deadmansswitch
      receivers:
      - name: default
      - name: deadmansswitch
      inhibit_rules:
      - source_match:
          alertname: 'JobRunningTimeExceeded'
          severity: 'critical'
        target_match:
          alertname: 'JobRunningTimeExceeded'
          severity: 'warning'
        equal: ['alertname', 'job', 'label_cronjob_name']
  kind: Secret
  metadata:
    name: alertmanager-alertmanager
    namespace: ${MONITORING_NAMESPACE}
    type: Opaque
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring

- apiVersion: v1
  kind: Service
  metadata:
    name: alertmanager
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  spec:
    ports:
      - name: web
        port: 6783
        protocol: TCP
        targetPort: web
    selector:
      alertmanager: alertmanager
      app: alertmanager
    sessionAffinity: None
    type: ClusterIP

- apiVersion: route.openshift.io/v1
  kind: Route
  metadata:
    name: alertmanager-route
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  spec:
    port:
      targetPort: web
    tls:
      termination: edge
    to:
      kind: Service
      name: alertmanager
    wildcardPolicy: None

- apiVersion: monitoring.coreos.com/v1
  kind: Alertmanager
  metadata:
    name: alertmanager
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  spec:
    listenLocal: false
    serviceAccountName: alertmanager

- apiVersion: monitoring.coreos.com/v1
  kind: PrometheusRule
  metadata:
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      prometheus: application-monitoring
      role: alert-rules
      monitoring-key: middleware
      application-monitoring: "true"
    name: syndesis-db-rules
    namespace: ${FUSE_ONLINE_NAMESPACE}
  spec:
    groups:
      - name: syndesis-db.rules
        rules:
          # Alert for any syndesis-db instance that is down
          - alert: FuseOnlineDatabaseInstanceDown
            annotations:
              message: >-
                Fuse Online Postgres instance {{$labels.pod}} in namespace {{$labels.namespace}} is down.
              sop_url: https://github.com/syndesisio/syndesis/blob/master/doc/managing_environments/topics/alerting_sop.adoc#fuseonlinedatabaseinstancedown
            expr: >
              sum(pg_up{job="syndesis-db"}) by(namespace, pod, instance) == 0
            for: 5m
            labels:
              severity: critical
          # Alert for any syndesis-db Postgres Exporter that is down
          - alert: FuseOnlinePostgresExporterDown
            annotations:
              message: >-
                syndesis-db has disappeared from Prometheus target discovery.
              sop_url: https://github.com/syndesisio/syndesis/blob/master/doc/managing_environments/topics/alerting_sop.adoc#fuseonlinepostgresexporterdown
            expr: >
              absent(up{job="syndesis-db"}) == 1
            for: 5m
            labels:
              severity: critical
  
- apiVersion: monitoring.coreos.com/v1
  kind: PrometheusRule
  metadata:
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      prometheus: application-monitoring
      role: alert-rules
      monitoring-key: middleware
      application-monitoring: "true"
    name: syndesis-rest-api-rules
    namespace: ${FUSE_ONLINE_NAMESPACE}
  spec:
    groups:
      - name: syndesis-rest-api.rules
        rules:
          # Alert for any syndesis-meta or syndesis-server API endpoint which has a high rate of HTTP 5XX responses
          - alert: FuseOnlineRestApiHighEndpointErrorRate
            annotations:
              message: >-
                Fuse Online service {{$labels.service}} in pod {{$labels.pod}}, namespace {{$labels.namespace}}, has an error rate (response code >= 500) of {{$value}} errors per second on endpoint '{{$labels.method}} {{$labels.uri}}'.
              sop_url: https://github.com/syndesisio/syndesis/blob/master/doc/managing_environments/topics/alerting_sop.adoc#fuseonlinerestapihighendpointerrorrate
            expr: >
              (sum(rate(http_server_requests_seconds_count{status=~"5..", job=~"syndesis-server|syndesis-meta"}[5m])) by (job,pod,namespace,method,uri,service)) /
              (sum(rate(http_server_requests_seconds_count{job=~"syndesis-server|syndesis-meta"}[5m])) by (job,pod,namespace,method,uri,service)) > 0.1
            for: 5m
            labels:
              severity: warning
  
          # Alert for any syndesis-meta or syndesis-server API endpoint where 90% of requests have a latency of > 1s
          - alert: FuseOnlineRestApiHighEndpointLatency
            annotations:
              message: >-
                Fuse Online service {{$labels.service}} in pod {{$labels.pod}}, namespace {{$labels.namespace}}, has high latency for endpoint '{{$labels.method}} {{$labels.uri}}'.
              sop_url: https://github.com/syndesisio/syndesis/blob/master/doc/managing_environments/topics/alerting_sop.adoc#fuseonlinerestapihighendpointlatency
            expr: >
              histogram_quantile(0.9, rate(http_server_requests_seconds_bucket{job=~"syndesis-server|syndesis-meta"}[5m])) > 1.0
            for: 5m
            labels:
              severity: warning
  


# Grafana
- apiVersion: image.openshift.io/v1
  kind: ImageStream
  metadata:
    name: grafana
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  spec:
    tags:
    - from:
        kind: DockerImage
        name: grafana/grafana:latest
      importPolicy:
        scheduled: true
      name: "latest"

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: syndesis-grafana-datasource-config
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  data:
    prometheus.yml: |
      apiVersion: 1
      datasources:
      - name: Prometheus
        type: prometheus
        access: proxy
        orgId: 1
        url: http://prometheus:9090
        version: 1
        isDefault: true
        editable: false

- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: syndesis-grafana-dashboard-config
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  data:
    dashboard-config.yml: |
        apiVersion: 1
        providers:
        - name: 'syndesis'
          orgId: 1
          folder: ''
          type: file
          updateIntervalSeconds: 30
          disableDeletion: true
          editable: true
          options:
            path: /etc/grafana/provisioning/dashboards
    syndesis-db-dashboard.json: |
      {
        "annotations": {
          "list": [
            {
              "builtIn": 1,
              "datasource": "-- Grafana --",
              "enable": true,
              "hide": true,
              "iconColor": "#6ed0e0",
              "limit": 100,
              "name": "Annotations & Alerts",
              "showIn": 0,
              "tags": [],
              "type": "dashboard"
            }
          ]
        },
        "description": "",
        "editable": true,
        "gnetId": 3300,
        "graphTooltip": 1,
        "iteration": 1550144280707,
        "links": [],
        "panels": [
          {
            "content": "<h1><b><font color=#e68a00><center>$version</center></font></b></h1>",
            "description": "",
            "gridPos": {
              "h": 2,
              "w": 2,
              "x": 0,
              "y": 0
            },
            "id": 65,
            "links": [],
            "mode": "html",
            "title": "Version",
            "type": "text"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "Prometheus",
            "decimals": 0,
            "description": "",
            "format": "short",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 2,
              "w": 3,
              "x": 2,
              "y": 0
            },
            "id": 86,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(max_over_time(pg_settings_max_connections{job=\"$job\",namespace=\"$namespace\"}[$interval])) or\nmax(max_over_time(pg_settings_max_connections{job=\"$job\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "thresholds": "",
            "title": "Max Connections",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "current"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "Prometheus",
            "decimals": 2,
            "description": "",
            "format": "bytes",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 2,
              "w": 4,
              "x": 5,
              "y": 0
            },
            "id": 67,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(max_over_time(pg_settings_shared_buffers_bytes{job=\"$job\",namespace=\"$namespace\"}[$interval])) or\nmax(max_over_time(pg_settings_shared_buffers_bytes{job=\"$job\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "",
            "title": "Shared Buffers",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "current"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "Prometheus",
            "decimals": 2,
            "description": "",
            "format": "bytes",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 2,
              "w": 4,
              "x": 9,
              "y": 0
            },
            "id": 68,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(max_over_time(pg_settings_wal_buffers_bytes{job=\"$job\",namespace=\"$namespace\"}[$interval])) or\nmax(max_over_time(pg_settings_wal_buffers_bytes{job=\"$job\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "",
            "title": "Disk-Page Buffers",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "current"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "Prometheus",
            "decimals": 2,
            "description": "",
            "format": "bytes",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 2,
              "w": 4,
              "x": 13,
              "y": 0
            },
            "id": 69,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(max_over_time(pg_settings_work_mem_bytes{job=\"$job\",namespace=\"$namespace\"}[$interval])) or\nmax(max_over_time(pg_settings_work_mem_bytes{job=\"$job\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "thresholds": "",
            "title": "Memory Size for each Sort",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "current"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": false,
            "colors": [
              "#299c46",
              "rgba(237, 129, 40, 0.89)",
              "#d44a3a"
            ],
            "datasource": "Prometheus",
            "decimals": 2,
            "description": "",
            "format": "bytes",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 2,
              "w": 3,
              "x": 17,
              "y": 0
            },
            "id": 70,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(max_over_time(pg_settings_effective_cache_size_bytes{job=\"$job\",namespace=\"$namespace\"}[$interval])) or\nmax(max_over_time(pg_settings_effective_cache_size_bytes{job=\"$job\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "thresholds": "",
            "title": "Disk Cache Size",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "current"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": true,
            "colors": [
              "#d44a3a",
              "rgba(237, 129, 40, 0.89)",
              "#299c46"
            ],
            "datasource": "Prometheus",
            "description": "",
            "format": "none",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 2,
              "w": 2,
              "x": 20,
              "y": 0
            },
            "id": 85,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "50%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": true
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "max(max_over_time(pg_settings_autovacuum{job=\"$job\",namespace=\"$namespace\"}[$interval])) or\nmax(max_over_time(pg_settings_autovacuum{job=\"$job\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "thresholds": "0,1",
            "title": "Autovacuum",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              },
              {
                "op": "=",
                "text": "NO",
                "value": "0"
              },
              {
                "op": "=",
                "text": "YES",
                "value": "1"
              }
            ],
            "valueName": "current"
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 2
            },
            "id": 74,
            "panels": [],
            "title": "Connections",
            "type": "row"
          },
          {
            "aliasColors": {
              "Total ": "#bf1b00"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 0,
            "fill": 2,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 3
            },
            "id": 23,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "hideZero": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [
              {
                "alias": "Total",
                "color": "#bf1b00",
                "fill": 0
              }
            ],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(max_over_time(pg_stat_activity_count{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\",datname=~\"$db\"}[$interval]) or\nmax_over_time(pg_stat_activity_count{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\",datname=~\"$db\"}[5m])) by (state)",
                "format": "time_series",
                "hide": false,
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "{{state}}",
                "refId": "A"
              },
              {
                "expr": "sum(max_over_time(pg_stat_activity_count{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\",datname=~\"$db\"}[$interval]) or\nmax_over_time(pg_stat_activity_count{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\",datname=~\"$db\"}[5m]))",
                "format": "time_series",
                "hide": false,
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Total",
                "metric": "pg",
                "refId": "C",
                "step": 2
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "PostgreSQL Connections",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "Maximum commections": "#bf1b00"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 0,
            "fill": 2,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 3
            },
            "id": 34,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [
              {
                "alias": "Maximum connections",
                "color": "#bf1b00",
                "fill": 0
              }
            ],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "max(max_over_time(pg_stat_database_numbackends{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) by (datname) or \nmax(max_over_time(pg_stat_database_numbackends{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m])) by (datname)",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "{{datname}}",
                "refId": "A"
              },
              {
                "expr": "max(max_over_time(pg_settings_max_connections{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or \nmax(max_over_time(pg_settings_max_connections{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "hide": false,
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Maximum connections",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Active Connections",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 11
            },
            "id": 76,
            "panels": [],
            "title": "Tuples",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "fill": 2,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 12
            },
            "id": 36,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(pg_stat_database_tup_fetched{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or \nsum(irate(pg_stat_database_tup_fetched{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Fetched",
                "refId": "A"
              },
              {
                "expr": "sum(rate(pg_stat_database_tup_returned{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_tup_returned{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Returned",
                "refId": "B"
              },
              {
                "expr": "sum(rate(pg_stat_database_tup_inserted{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_tup_inserted{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Inserted",
                "refId": "C"
              },
              {
                "expr": "sum(rate(pg_stat_database_tup_updated{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_tup_updated{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Updated",
                "refId": "D"
              },
              {
                "expr": "sum(rate(pg_stat_database_tup_deleted{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_tup_deleted{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Deleted",
                "refId": "E"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Tuples",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 2,
            "fill": 2,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 12
            },
            "id": 24,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(pg_stat_database_tup_returned{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_tup_returned{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "hide": false,
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Rows returned by queries",
                "refId": "A",
                "step": 2
              },
              {
                "expr": "sum(rate(pg_stat_database_tup_fetched{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_tup_fetched{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "hide": false,
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Rows fetched by queries",
                "refId": "B",
                "step": 2
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Read Tuple Activity",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "ops",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 2,
            "fill": 2,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 20
            },
            "id": 25,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(pg_stat_database_tup_inserted{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[1m])) or\nsum(irate(pg_stat_database_tup_inserted{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Rows inserted by queries",
                "metric": "pg_stat_database_tup",
                "refId": "C",
                "step": 2
              },
              {
                "expr": "sum(rate(pg_stat_database_tup_updated{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_tup_updated{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Rows updated by queries",
                "metric": "pg_stat_database_tup",
                "refId": "D",
                "step": 2
              },
              {
                "expr": "sum(rate(pg_stat_database_tup_deleted{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_tup_deleted{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Rows deleted by queries",
                "metric": "pg_stat_database_tup",
                "refId": "E",
                "step": 2
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Tuples Changed per $interval",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "ops",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 28
            },
            "id": 78,
            "panels": [],
            "title": "Transactions",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 2,
            "fill": 2,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 29
            },
            "id": 26,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(pg_stat_database_xact_commit{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or \nsum(irate(pg_stat_database_xact_commit{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Commits",
                "metric": "pg_stat_database_xact_commit",
                "refId": "A",
                "step": 2
              },
              {
                "expr": "sum(rate(pg_stat_database_xact_rollback{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_xact_rollback{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Rollbacks",
                "metric": "pg_stat_database_xact_commit",
                "refId": "B",
                "step": 2
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Transactions",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "ops",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 2,
            "fill": 2,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 29
            },
            "id": 18,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "max(max_over_time(pg_stat_activity_max_tx_duration{job=\"$job\",namespace=\"$namespace\"}[$interval])) by (state) or\nmax(max_over_time(pg_stat_activity_max_tx_duration{job=\"$job\",namespace=\"$namespace\"}[5m])) by (state)",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "{{state}}",
                "metric": "pg_stat_activity_max_tx_duration",
                "refId": "A",
                "step": 2
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Duration of Transactions",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "s",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "s",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 37
            },
            "id": 80,
            "panels": [],
            "title": "Temp Files",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 0,
            "fill": 1,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 38
            },
            "id": 48,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "expr": "max(max_over_time(pg_stat_database_temp_files{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) by (datname) or \nmax(max_over_time(pg_stat_database_temp_files{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m])) by (datname)",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "{{datname}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Number of Temp Files",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 2,
            "fill": 1,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 38
            },
            "id": 49,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [
              {
                "alias": "increase *",
                "bars": true,
                "lines": false
              }
            ],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "max(max_over_time(pg_stat_database_temp_bytes{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) by (datname) or \nmax(max_over_time(pg_stat_database_temp_bytes{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m])) by (datname)",
                "format": "time_series",
                "hide": false,
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "{{datname}}",
                "refId": "A"
              },
              {
                "expr": "rate(pg_stat_database_temp_bytes{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval]) or\nirate(pg_stat_database_temp_bytes{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m])",
                "format": "time_series",
                "hide": true,
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "increase {{datname}}",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Size of Temp Files",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 2,
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 46
            },
            "id": 82,
            "panels": [],
            "title": "Conflicts & Locks",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 2,
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {},
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 47
            },
            "id": 3,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "connected",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "alias": "conflicts",
                "dsType": "prometheus",
                "expr": "sum(rate(pg_stat_database_deadlocks{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or \nsum(irate(pg_stat_database_deadlocks{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "groupBy": [
                  {
                    "params": [
                      "$interval"
                    ],
                    "type": "time"
                  },
                  {
                    "params": [
                      "null"
                    ],
                    "type": "fill"
                  }
                ],
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Deadlocks",
                "measurement": "postgresql",
                "policy": "default",
                "refId": "A",
                "resultFormat": "time_series",
                "select": [
                  [
                    {
                      "params": [
                        "conflicts"
                      ],
                      "type": "field"
                    },
                    {
                      "params": [],
                      "type": "mean"
                    },
                    {
                      "params": [],
                      "type": "difference"
                    }
                  ]
                ],
                "step": 2,
                "tags": [
                  {
                    "key": "host",
                    "operator": "=~",
                    "value": "/^$host$/"
                  }
                ]
              },
              {
                "alias": "deadlocks",
                "dsType": "prometheus",
                "expr": "sum(rate(pg_stat_database_conflicts{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or \nsum(irate(pg_stat_database_conflicts{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "groupBy": [
                  {
                    "params": [
                      "$interval"
                    ],
                    "type": "time"
                  },
                  {
                    "params": [
                      "null"
                    ],
                    "type": "fill"
                  }
                ],
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Conflicts",
                "measurement": "postgresql",
                "policy": "default",
                "refId": "B",
                "resultFormat": "time_series",
                "select": [
                  [
                    {
                      "params": [
                        "deadlocks"
                      ],
                      "type": "field"
                    },
                    {
                      "params": [],
                      "type": "mean"
                    },
                    {
                      "params": [],
                      "type": "difference"
                    }
                  ]
                ],
                "step": 2,
                "tags": [
                  {
                    "key": "host",
                    "operator": "=~",
                    "value": "/^$host$/"
                  }
                ]
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Conflicts/Deadlocks",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "ops",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 0,
            "editable": true,
            "error": false,
            "fill": 2,
            "grid": {},
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 47
            },
            "id": 61,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "connected",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "alias": "conflicts",
                "dsType": "prometheus",
                "expr": "max(max_over_time(pg_locks_count{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) by (mode, datname) or\nmax(max_over_time(pg_locks_count{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m])) by (mode, datname)",
                "format": "time_series",
                "groupBy": [
                  {
                    "params": [
                      "$interval"
                    ],
                    "type": "time"
                  },
                  {
                    "params": [
                      "null"
                    ],
                    "type": "fill"
                  }
                ],
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "{{mode}} - {{datname}}",
                "measurement": "postgresql",
                "policy": "default",
                "refId": "A",
                "resultFormat": "time_series",
                "select": [
                  [
                    {
                      "params": [
                        "conflicts"
                      ],
                      "type": "field"
                    },
                    {
                      "params": [],
                      "type": "mean"
                    },
                    {
                      "params": [],
                      "type": "difference"
                    }
                  ]
                ],
                "step": 2,
                "tags": [
                  {
                    "key": "host",
                    "operator": "=~",
                    "value": "/^$host$/"
                  }
                ]
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Number of Locks",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 55
            },
            "id": 84,
            "panels": [],
            "title": "Buffers & Blocks Operations",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 2,
            "fill": 2,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 56
            },
            "id": 50,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [
              {
                "alias": "/Write */",
                "yaxis": 2
              }
            ],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(pg_stat_database_blk_read_time{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) by (datname) or\nsum(irate(pg_stat_database_blk_read_time{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m])) by (datname)",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Read {{datname}}",
                "refId": "A"
              },
              {
                "expr": "sum(rate(pg_stat_database_blk_write_time{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) by (datname) or\nsum(irate(pg_stat_database_blk_write_time{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m])) by (datname)",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Write {{datname}}",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Operations with Blocks",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 0,
                "format": "rps",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "decimals": 0,
                "format": "wps",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 2,
            "editable": true,
            "error": false,
            "fill": 2,
            "grid": {},
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 56
            },
            "id": 2,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "hideZero": false,
              "max": true,
              "min": true,
              "rightSide": false,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "connected",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "alias": "Buffers Allocated",
                "dsType": "prometheus",
                "expr": "rate(pg_stat_bgwriter_buffers_alloc{job=\"$job\",namespace=\"$namespace\"}[$interval]) or \nirate(pg_stat_bgwriter_buffers_alloc{job=\"$job\",namespace=\"$namespace\"}[5m])",
                "format": "time_series",
                "groupBy": [
                  {
                    "params": [
                      "$interval"
                    ],
                    "type": "time"
                  },
                  {
                    "params": [
                      "null"
                    ],
                    "type": "fill"
                  }
                ],
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Allocated",
                "measurement": "postgresql",
                "policy": "default",
                "refId": "A",
                "resultFormat": "time_series",
                "select": [
                  [
                    {
                      "params": [
                        "buffers_alloc"
                      ],
                      "type": "field"
                    },
                    {
                      "params": [],
                      "type": "mean"
                    },
                    {
                      "params": [],
                      "type": "difference"
                    }
                  ]
                ],
                "step": 2,
                "tags": [
                  {
                    "key": "host",
                    "operator": "=~",
                    "value": "/^$host$/"
                  }
                ]
              },
              {
                "alias": "Buffers Allocated",
                "dsType": "prometheus",
                "expr": "rate(pg_stat_bgwriter_buffers_backend_fsync{job=\"$job\",namespace=\"$namespace\"}[$interval]) or\nirate(pg_stat_bgwriter_buffers_backend_fsync{job=\"$job\",namespace=\"$namespace\"}[5m])",
                "format": "time_series",
                "groupBy": [
                  {
                    "params": [
                      "$interval"
                    ],
                    "type": "time"
                  },
                  {
                    "params": [
                      "null"
                    ],
                    "type": "fill"
                  }
                ],
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Fsync calls by a backend",
                "measurement": "postgresql",
                "policy": "default",
                "refId": "B",
                "resultFormat": "time_series",
                "select": [
                  [
                    {
                      "params": [
                        "buffers_alloc"
                      ],
                      "type": "field"
                    },
                    {
                      "params": [],
                      "type": "mean"
                    },
                    {
                      "params": [],
                      "type": "difference"
                    }
                  ]
                ],
                "step": 2,
                "tags": [
                  {
                    "key": "host",
                    "operator": "=~",
                    "value": "/^$host$/"
                  }
                ]
              },
              {
                "alias": "Buffers Allocated",
                "dsType": "prometheus",
                "expr": "rate(pg_stat_bgwriter_buffers_backend{job=\"$job\",namespace=\"$namespace\"}[$interval]) or\nirate(pg_stat_bgwriter_buffers_backend{job=\"$job\",namespace=\"$namespace\"}[5m])",
                "format": "time_series",
                "groupBy": [
                  {
                    "params": [
                      "$interval"
                    ],
                    "type": "time"
                  },
                  {
                    "params": [
                      "null"
                    ],
                    "type": "fill"
                  }
                ],
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Written directly by a backend",
                "measurement": "postgresql",
                "policy": "default",
                "refId": "C",
                "resultFormat": "time_series",
                "select": [
                  [
                    {
                      "params": [
                        "buffers_alloc"
                      ],
                      "type": "field"
                    },
                    {
                      "params": [],
                      "type": "mean"
                    },
                    {
                      "params": [],
                      "type": "difference"
                    }
                  ]
                ],
                "step": 2,
                "tags": [
                  {
                    "key": "host",
                    "operator": "=~",
                    "value": "/^$host$/"
                  }
                ]
              },
              {
                "alias": "Buffers Allocated",
                "dsType": "prometheus",
                "expr": "rate(pg_stat_bgwriter_buffers_clean{job=\"$job\",namespace=\"$namespace\"}[$interval]) or \nirate(pg_stat_bgwriter_buffers_clean{job=\"$job\",namespace=\"$namespace\"}[5m])",
                "format": "time_series",
                "groupBy": [
                  {
                    "params": [
                      "$interval"
                    ],
                    "type": "time"
                  },
                  {
                    "params": [
                      "null"
                    ],
                    "type": "fill"
                  }
                ],
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Written by the background writer",
                "measurement": "postgresql",
                "policy": "default",
                "refId": "D",
                "resultFormat": "time_series",
                "select": [
                  [
                    {
                      "params": [
                        "buffers_alloc"
                      ],
                      "type": "field"
                    },
                    {
                      "params": [],
                      "type": "mean"
                    },
                    {
                      "params": [],
                      "type": "difference"
                    }
                  ]
                ],
                "step": 2,
                "tags": [
                  {
                    "key": "host",
                    "operator": "=~",
                    "value": "/^$host$/"
                  }
                ]
              },
              {
                "alias": "Buffers Allocated",
                "dsType": "prometheus",
                "expr": "rate(pg_stat_bgwriter_buffers_checkpoint{job=\"$job\",namespace=\"$namespace\"}[5m]) or\nirate(pg_stat_bgwriter_buffers_checkpoint{job=\"$job\",namespace=\"$namespace\"}[5m])",
                "format": "time_series",
                "groupBy": [
                  {
                    "params": [
                      "$interval"
                    ],
                    "type": "time"
                  },
                  {
                    "params": [
                      "null"
                    ],
                    "type": "fill"
                  }
                ],
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Written during checkpoints",
                "measurement": "postgresql",
                "policy": "default",
                "refId": "E",
                "resultFormat": "time_series",
                "select": [
                  [
                    {
                      "params": [
                        "buffers_alloc"
                      ],
                      "type": "field"
                    },
                    {
                      "params": [],
                      "type": "mean"
                    },
                    {
                      "params": [],
                      "type": "difference"
                    }
                  ]
                ],
                "step": 2,
                "tags": [
                  {
                    "key": "host",
                    "operator": "=~",
                    "value": "/^$host$/"
                  }
                ]
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Buffers",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 64
            },
            "id": 72,
            "panels": [],
            "title": "Others",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 0,
            "description": "Based on pg_stat_database_conflicts view",
            "fill": 2,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 65
            },
            "id": 28,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(pg_stat_database_conflicts_confl_bufferpin{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_conflicts_confl_bufferpin{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Pinned buffers",
                "metric": "pg_stat_database_conflicts_confl_bufferpin",
                "refId": "A",
                "step": 2
              },
              {
                "expr": "sum(rate(pg_stat_database_conflicts_confl_deadlock{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_conflicts_confl_deadlock{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Deadlocks",
                "metric": "pg_stat_database_conflicts_confl_bufferpin",
                "refId": "B",
                "step": 2
              },
              {
                "expr": "sum(rate(pg_stat_database_conflicts_confl_lock{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_conflicts_confl_lock{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Lock timeouts",
                "metric": "pg_stat_database_conflicts_confl_bufferpin",
                "refId": "C",
                "step": 2
              },
              {
                "expr": "sum(rate(pg_stat_database_conflicts_confl_snapshot{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_conflicts_confl_snapshot{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Old snapshots",
                "metric": "pg_stat_database_conflicts_confl_bufferpin",
                "refId": "D",
                "step": 2
              },
              {
                "expr": "sum(rate(pg_stat_database_conflicts_confl_tablespace{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) or\nsum(irate(pg_stat_database_conflicts_confl_tablespace{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m]))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Dropped tablespaces ",
                "metric": "pg_stat_database_conflicts_confl_bufferpin",
                "refId": "E",
                "step": 2
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Canceled Queries",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 0,
                "format": "ops",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "decimals": 2,
            "editable": true,
            "error": false,
            "fill": 2,
            "grid": {},
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 65
            },
            "id": 14,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "minSpan": 4,
            "nullPointMode": "connected",
            "percentage": true,
            "pointradius": 1,
            "points": false,
            "renderer": "flot",
            "repeat": null,
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(pg_stat_database_blks_hit{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}) by (datname) /\n(sum(pg_stat_database_blks_hit{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}) by (datname) + \nsum(pg_stat_database_blks_read{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}) by (datname))",
                "format": "time_series",
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Cache hit rate {{datname}}",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Cache Hit Ratio",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "percentunit",
                "label": null,
                "logBase": 1,
                "max": "1",
                "min": "0",
                "show": true
              },
              {
                "format": "percent",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "fill": 2,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 73
            },
            "id": 22,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "hideEmpty": false,
              "hideZero": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "rate(pg_stat_bgwriter_checkpoint_sync_time{job=\"$job\",namespace=\"$namespace\"}[$interval]) or\nirate(pg_stat_bgwriter_checkpoint_sync_time{job=\"$job\",namespace=\"$namespace\"}[5m])",
                "format": "time_series",
                "hide": false,
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Files Synchronization to disk",
                "metric": "pg_stat_bgwriter_checkpoint_sync_time",
                "refId": "A",
                "step": 2
              },
              {
                "expr": "rate(pg_stat_bgwriter_checkpoint_write_time{job=\"$job\",namespace=\"$namespace\"}[$interval]) or\nirate(pg_stat_bgwriter_checkpoint_write_time{job=\"$job\",namespace=\"$namespace\"}[5m])",
                "format": "time_series",
                "hide": false,
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Written Files to disk",
                "metric": "pg_stat_bgwriter_checkpoint_write_time",
                "refId": "B",
                "step": 2
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Checkpoint stats",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "ops",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "fill": 2,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 73
            },
            "id": 87,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "hideEmpty": false,
              "hideZero": false,
              "max": true,
              "min": true,
              "show": true,
              "sort": "avg",
              "sortDesc": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "max(max_over_time(pg_database_size{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[$interval])) by (datname) or\nmax(max_over_time(pg_database_size{job=\"$job\",datname=~\"$db\",namespace=\"$namespace\"}[5m])) by (datname)",
                "format": "time_series",
                "hide": false,
                "interval": "$interval",
                "intervalFactor": 1,
                "legendFormat": "Database size {{datname}}",
                "metric": "pg_stat_bgwriter_checkpoint_sync_time",
                "refId": "A",
                "step": 2
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Database size",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "decbytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "refresh": "1m",
        "schemaVersion": 16,
        "style": "dark",
        "tags": [],
        "templating": {
          "list": [
            {
              "auto": true,
              "auto_count": 200,
              "auto_min": "1s",
              "current": {
                "text": "auto",
                "value": "$__auto_interval_interval"
              },
              "hide": 0,
              "label": "Interval",
              "name": "interval",
              "options": [
                {
                  "selected": true,
                  "text": "auto",
                  "value": "$__auto_interval_interval"
                },
                {
                  "selected": false,
                  "text": "1s",
                  "value": "1s"
                },
                {
                  "selected": false,
                  "text": "5s",
                  "value": "5s"
                },
                {
                  "selected": false,
                  "text": "1m",
                  "value": "1m"
                },
                {
                  "selected": false,
                  "text": "5m",
                  "value": "5m"
                },
                {
                  "selected": false,
                  "text": "1h",
                  "value": "1h"
                },
                {
                  "selected": false,
                  "text": "6h",
                  "value": "6h"
                },
                {
                  "selected": false,
                  "text": "1d",
                  "value": "1d"
                }
              ],
              "query": "1s,5s,1m,5m,1h,6h,1d",
              "refresh": 2,
              "skipUrlSync": false,
              "type": "interval"
            },
            {
              "allValue": "(syndesis|sampledb)",
              "current": {
                "tags": [],
                "text": "All",
                "value": "$__all"
              },
              "hide": 0,
              "includeAll": true,
              "label": "Database",
              "multi": false,
              "name": "db",
              "options": [
                {
                  "selected": true,
                  "text": "All",
                  "value": "$__all"
                },
                {
                  "selected": false,
                  "text": "sampledb",
                  "value": "sampledb"
                },
                {
                  "selected": false,
                  "text": "syndesis",
                  "value": "syndesis"
                }
              ],
              "query": "sampledb,syndesis",
              "skipUrlSync": false,
              "type": "custom"
            },
            {
              "allValue": null,
              "current": {},
              "datasource": "Prometheus",
              "definition": "",
              "hide": 2,
              "includeAll": false,
              "label": null,
              "multi": false,
              "name": "version",
              "options": [],
              "query": "label_values(pg_static,version)",
              "refresh": 2,
              "regex": "/ ([0-9\\.]+)/",
              "skipUrlSync": false,
              "sort": 2,
              "tagValuesQuery": "",
              "tags": [],
              "tagsQuery": "",
              "type": "query",
              "useTags": false
            },
            {
              "current": {
                "text": "syndesis-db",
                "value": "syndesis-db"
              },
              "hide": 2,
              "label": null,
              "name": "job",
              "options": [
                {
                  "selected": true,
                  "text": "syndesis-db",
                  "value": "syndesis-db"
                }
              ],
              "query": "syndesis-db",
              "skipUrlSync": false,
              "type": "constant"
            },
            {
              "allValue": ".*",
              "current": {},
              "datasource": "Prometheus",
              "definition": "label_values(pg_up{service=\"$job\"}, namespace)",
              "hide": 0,
              "includeAll": false,
              "label": "Namespace",
              "multi": false,
              "name": "namespace",
              "options": [],
              "query": "label_values(pg_up{service=\"$job\"}, namespace)",
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 1,
              "tagValuesQuery": "",
              "tags": [],
              "tagsQuery": "",
              "type": "query",
              "useTags": false
            }
          ]
        },
        "time": {
          "from": "now-6h",
          "to": "now"
        },
        "timepicker": {
          "hidden": false,
          "refresh_intervals": [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
          ],
          "time_options": [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
          ]
        },
        "timezone": "browser",
        "title": "Fuse Online - Infrastructure - DB",
        "uid": "AzfHN99lqp",
        "version": 1
      }
      
    syndesis-jvm-dashboard.json: |
      {
        "annotations": {
          "list": [
            {
              "builtIn": 1,
              "datasource": "-- Grafana --",
              "enable": true,
              "hide": true,
              "iconColor": "rgba(0, 211, 255, 1)",
              "limit": 100,
              "name": "Annotations & Alerts",
              "showIn": 0,
              "type": "dashboard"
            },
            {
              "datasource": "Prometheus",
              "enable": true,
              "expr": "resets(process_uptime_seconds{job=\"$job\",namespace=\"$namespace\"}[1m]) > 0",
              "iconColor": "rgba(255, 96, 96, 1)",
              "name": "Restart Detection",
              "showIn": 0,
              "step": "1m",
              "tagKeys": "restart-tag",
              "textFormat": "uptime reset",
              "titleFormat": "Restart"
            }
          ]
        },
        "description": "",
        "editable": true,
        "gnetId": 4701,
        "graphTooltip": 1,
        "iteration": 1549550445181,
        "links": [],
        "panels": [
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 0
            },
            "id": 125,
            "panels": [],
            "repeat": null,
            "title": "Quick Facts",
            "type": "row"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": true,
            "colors": [
              "rgba(245, 54, 54, 0.9)",
              "rgba(237, 129, 40, 0.89)",
              "rgba(50, 172, 45, 0.97)"
            ],
            "datasource": "Prometheus",
            "decimals": 1,
            "editable": true,
            "error": false,
            "format": "s",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 6,
              "x": 0,
              "y": 1
            },
            "height": "",
            "id": 63,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "70%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "process_uptime_seconds{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "instant": true,
                "intervalFactor": 2,
                "legendFormat": "",
                "metric": "",
                "refId": "A",
                "step": 14400
              }
            ],
            "thresholds": "",
            "title": "Uptime",
            "transparent": false,
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "current"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": true,
            "colors": [
              "rgba(245, 54, 54, 0.9)",
              "rgba(237, 129, 40, 0.89)",
              "rgba(50, 172, 45, 0.97)"
            ],
            "datasource": "Prometheus",
            "decimals": null,
            "editable": true,
            "error": false,
            "format": "dateTimeAsIso",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 6,
              "x": 6,
              "y": 1
            },
            "height": "",
            "id": 92,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "70%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "process_start_time_seconds{job=\"$job\",namespace=\"$namespace\"}*1000",
                "format": "time_series",
                "instant": true,
                "intervalFactor": 2,
                "legendFormat": "",
                "metric": "",
                "refId": "A",
                "step": 14400
              }
            ],
            "thresholds": "",
            "title": "Start time",
            "transparent": false,
            "type": "singlestat",
            "valueFontSize": "70%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "current"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": true,
            "colors": [
              "rgba(50, 172, 45, 0.97)",
              "rgba(237, 129, 40, 0.89)",
              "rgba(245, 54, 54, 0.9)"
            ],
            "datasource": "Prometheus",
            "decimals": 2,
            "editable": true,
            "error": false,
            "format": "percent",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 6,
              "x": 12,
              "y": 1
            },
            "id": 65,
            "interval": null,
            "links": [],
            "mappingType": 1,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "70%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "sum(jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", area=\"heap\"})*100/sum(jvm_memory_max_bytes{job=\"$job\",namespace=\"$namespace\", area=\"heap\"})",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "",
                "refId": "A",
                "step": 14400
              }
            ],
            "thresholds": "70,90",
            "title": "Heap used",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              }
            ],
            "valueName": "current"
          },
          {
            "cacheTimeout": null,
            "colorBackground": false,
            "colorValue": true,
            "colors": [
              "rgba(50, 172, 45, 0.97)",
              "rgba(237, 129, 40, 0.89)",
              "rgba(245, 54, 54, 0.9)"
            ],
            "datasource": "Prometheus",
            "decimals": 2,
            "editable": true,
            "error": false,
            "format": "percent",
            "gauge": {
              "maxValue": 100,
              "minValue": 0,
              "show": false,
              "thresholdLabels": false,
              "thresholdMarkers": true
            },
            "gridPos": {
              "h": 3,
              "w": 6,
              "x": 18,
              "y": 1
            },
            "id": 75,
            "interval": null,
            "links": [],
            "mappingType": 2,
            "mappingTypes": [
              {
                "name": "value to text",
                "value": 1
              },
              {
                "name": "range to text",
                "value": 2
              }
            ],
            "maxDataPoints": 100,
            "nullPointMode": "connected",
            "nullText": null,
            "postfix": "",
            "postfixFontSize": "50%",
            "prefix": "",
            "prefixFontSize": "70%",
            "rangeMaps": [
              {
                "from": "null",
                "text": "N/A",
                "to": "null"
              },
              {
                "from": "-99999999999999999999999999999999",
                "text": "N/A",
                "to": "0"
              }
            ],
            "sparkline": {
              "fillColor": "rgba(31, 118, 189, 0.18)",
              "full": false,
              "lineColor": "rgb(31, 120, 193)",
              "show": false
            },
            "tableColumn": "",
            "targets": [
              {
                "expr": "sum(jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", area=\"nonheap\"})*100/sum(jvm_memory_max_bytes{job=\"$job\",namespace=\"$namespace\", area=\"nonheap\"})",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "",
                "refId": "A",
                "step": 14400
              }
            ],
            "thresholds": "70,90",
            "title": "Non-Heap used",
            "type": "singlestat",
            "valueFontSize": "80%",
            "valueMaps": [
              {
                "op": "=",
                "text": "N/A",
                "value": "null"
              },
              {
                "op": "=",
                "text": "x",
                "value": ""
              }
            ],
            "valueName": "current"
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 4
            },
            "id": 127,
            "panels": [],
            "repeat": null,
            "title": "JVM Memory",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 0,
              "y": 5
            },
            "id": 24,
            "legend": {
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", area=\"heap\"})",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "used",
                "metric": "",
                "refId": "A",
                "step": 2400
              },
              {
                "expr": "sum(jvm_memory_committed_bytes{job=\"$job\",namespace=\"$namespace\", area=\"heap\"})",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "committed",
                "refId": "B",
                "step": 2400
              },
              {
                "expr": "sum(jvm_memory_max_bytes{job=\"$job\",namespace=\"$namespace\", area=\"heap\"})",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "max",
                "refId": "C",
                "step": 2400
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "JVM Heap",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "mbytes",
              "short"
            ],
            "yaxes": [
              {
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 6,
              "y": 5
            },
            "id": 25,
            "legend": {
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", area=\"nonheap\"})",
                "format": "time_series",
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "used",
                "metric": "",
                "refId": "A",
                "step": 2400
              },
              {
                "expr": "sum(jvm_memory_committed_bytes{job=\"$job\",namespace=\"$namespace\", area=\"nonheap\"})",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "committed",
                "refId": "B",
                "step": 2400
              },
              {
                "expr": "sum(jvm_memory_max_bytes{job=\"$job\",namespace=\"$namespace\", area=\"nonheap\"})",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "max",
                "refId": "C",
                "step": 2400
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "JVM Non-Heap",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "mbytes",
              "short"
            ],
            "yaxes": [
              {
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 12,
              "y": 5
            },
            "id": 26,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\"})",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "used",
                "metric": "",
                "refId": "A",
                "step": 2400
              },
              {
                "expr": "sum(jvm_memory_committed_bytes{job=\"$job\",namespace=\"$namespace\"})",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "committed",
                "refId": "B",
                "step": 2400
              },
              {
                "expr": "sum(jvm_memory_max_bytes{job=\"$job\",namespace=\"$namespace\"})",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "max",
                "refId": "C",
                "step": 2400
              },
              {
                "expr": "process_memory_vss_bytes{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "hide": true,
                "intervalFactor": 2,
                "legendFormat": "vss",
                "metric": "",
                "refId": "D",
                "step": 2400
              },
              {
                "expr": "process_memory_rss_bytes{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "rss",
                "refId": "E",
                "step": 2400
              },
              {
                "expr": "process_memory_pss_bytes{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "pss",
                "refId": "F",
                "step": 2400
              },
              {
                "expr": "process_memory_swap_bytes{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "swap",
                "refId": "G",
                "step": 2400
              },
              {
                "expr": "process_memory_swappss_bytes{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "swappss",
                "refId": "H",
                "step": 2400
              },
              {
                "expr": "process_memory_pss_bytes{job=\"$job\",namespace=\"$namespace\"} + process_memory_swap_bytes{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "phys (pss+swap)",
                "refId": "I",
                "step": 2400
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "JVM Total",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "mbytes",
              "short"
            ],
            "yaxes": [
              {
                "format": "bytes",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 12
            },
            "id": 128,
            "panels": [],
            "repeat": null,
            "title": "JVM Misc",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 0,
              "y": 13
            },
            "id": 106,
            "legend": {
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "system_cpu_usage{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 1,
                "legendFormat": "system",
                "metric": "",
                "refId": "A",
                "step": 2400
              },
              {
                "expr": "process_cpu_usage{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 1,
                "legendFormat": "process",
                "refId": "B"
              },
              {
                "expr": "avg_over_time(process_cpu_usage{job=\"$job\",namespace=\"$namespace\"}[1h])",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 1,
                "legendFormat": "process-1h",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "CPU",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "short",
              "short"
            ],
            "yaxes": [
              {
                "decimals": 1,
                "format": "percentunit",
                "label": "",
                "logBase": 1,
                "max": "1",
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 6,
              "y": 13
            },
            "id": 93,
            "legend": {
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "system_load_average_1m{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "system-1m",
                "metric": "",
                "refId": "A",
                "step": 2400
              },
              {
                "expr": "",
                "format": "time_series",
                "intervalFactor": 2,
                "refId": "B"
              },
              {
                "expr": "system_cpu_count{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "cpu",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Load",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "short",
              "short"
            ],
            "yaxes": [
              {
                "decimals": 1,
                "format": "short",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 12,
              "y": 13
            },
            "id": 32,
            "legend": {
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_threads_live{job=\"$job\",namespace=\"$namespace\"} or jvm_threads_live_threads{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "live",
                "metric": "",
                "refId": "A",
                "step": 2400
              },
              {
                "expr": "jvm_threads_daemon{job=\"$job\",namespace=\"$namespace\"} or jvm_threads_daemon_threads{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "daemon",
                "metric": "",
                "refId": "B",
                "step": 2400
              },
              {
                "expr": "jvm_threads_peak{job=\"$job\",namespace=\"$namespace\"} or jvm_threads_peak_threads{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "peak",
                "refId": "C",
                "step": 2400
              },
              {
                "expr": "process_threads{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "process",
                "refId": "D",
                "step": 2400
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Threads",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "short",
              "short"
            ],
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "blocked": "#bf1b00",
              "new": "#fce2de",
              "runnable": "#7eb26d",
              "terminated": "#511749",
              "timed-waiting": "#c15c17",
              "waiting": "#eab839"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "fill": 1,
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 18,
              "y": 13
            },
            "id": 124,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_threads_states_threads{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "{{state}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Thread States",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "debug": "#1F78C1",
              "error": "#BF1B00",
              "info": "#508642",
              "trace": "#6ED0E0",
              "warn": "#EAB839"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 18,
              "x": 0,
              "y": 20
            },
            "height": "",
            "id": 91,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": true,
              "hideEmpty": false,
              "hideZero": false,
              "max": true,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": true,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [
              {
                "alias": "error",
                "yaxis": 1
              },
              {
                "alias": "warn",
                "yaxis": 1
              }
            ],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "increase(logback_events_total{job=\"$job\",namespace=\"$namespace\"}[1m])",
                "format": "time_series",
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "{{level}}",
                "metric": "",
                "refId": "A",
                "step": 1200
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Log Events (1m)",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "transparent": false,
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "short",
              "short"
            ],
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 18,
              "y": 20
            },
            "id": 61,
            "legend": {
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "process_open_fds{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 2,
                "legendFormat": "open",
                "metric": "",
                "refId": "A",
                "step": 2400
              },
              {
                "expr": "process_max_fds{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 2,
                "legendFormat": "max",
                "metric": "",
                "refId": "B",
                "step": 2400
              },
              {
                "expr": "process_files_open{job=\"$job\",namespace=\"$namespace\"} or process_files_open_files{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "open",
                "refId": "C"
              },
              {
                "expr": "process_files_max{job=\"$job\",namespace=\"$namespace\"} or process_files_max_files{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "max",
                "refId": "D"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "File Descriptors",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "short",
              "short"
            ],
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": null,
                "logBase": 10,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 27
            },
            "id": 129,
            "panels": [],
            "repeat": "persistence_counts",
            "title": "JVM Memory Pools (Heap)",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 8,
              "x": 0,
              "y": 28
            },
            "id": 3,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "minSpan": 8,
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "repeat": "jvm_memory_pool_heap",
            "scopedVars": {
              "jvm_memory_pool_heap": {
                "selected": false,
                "text": "PS Eden Space",
                "value": "PS Eden Space"
              }
            },
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_heap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "used",
                "metric": "",
                "refId": "A",
                "step": 1800
              },
              {
                "expr": "jvm_memory_committed_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_heap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "commited",
                "metric": "",
                "refId": "B",
                "step": 1800
              },
              {
                "expr": "jvm_memory_max_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_heap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "max",
                "metric": "",
                "refId": "C",
                "step": 1800
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "$jvm_memory_pool_heap",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "mbytes",
              "short"
            ],
            "yaxes": [
              {
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 8,
              "x": 8,
              "y": 28
            },
            "id": 134,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "minSpan": 8,
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "repeat": null,
            "repeatIteration": 1549028060072,
            "repeatPanelId": 3,
            "scopedVars": {
              "jvm_memory_pool_heap": {
                "selected": false,
                "text": "PS Old Gen",
                "value": "PS Old Gen"
              }
            },
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_heap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "used",
                "metric": "",
                "refId": "A",
                "step": 1800
              },
              {
                "expr": "jvm_memory_committed_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_heap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "commited",
                "metric": "",
                "refId": "B",
                "step": 1800
              },
              {
                "expr": "jvm_memory_max_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_heap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "max",
                "metric": "",
                "refId": "C",
                "step": 1800
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "$jvm_memory_pool_heap",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "mbytes",
              "short"
            ],
            "yaxes": [
              {
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 8,
              "x": 16,
              "y": 28
            },
            "id": 135,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "minSpan": 8,
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "repeat": null,
            "repeatIteration": 1549028060072,
            "repeatPanelId": 3,
            "scopedVars": {
              "jvm_memory_pool_heap": {
                "selected": false,
                "text": "PS Survivor Space",
                "value": "PS Survivor Space"
              }
            },
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_heap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "used",
                "metric": "",
                "refId": "A",
                "step": 1800
              },
              {
                "expr": "jvm_memory_committed_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_heap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "commited",
                "metric": "",
                "refId": "B",
                "step": 1800
              },
              {
                "expr": "jvm_memory_max_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_heap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "max",
                "metric": "",
                "refId": "C",
                "step": 1800
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "$jvm_memory_pool_heap",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "mbytes",
              "short"
            ],
            "yaxes": [
              {
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 35
            },
            "id": 130,
            "panels": [],
            "repeat": null,
            "title": "JVM Memory Pools (Non-Heap)",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 8,
              "x": 0,
              "y": 36
            },
            "id": 78,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "minSpan": 8,
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "repeat": "jvm_memory_pool_nonheap",
            "scopedVars": {
              "jvm_memory_pool_nonheap": {
                "selected": false,
                "text": "Metaspace",
                "value": "Metaspace"
              }
            },
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_nonheap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "used",
                "metric": "",
                "refId": "A",
                "step": 1800
              },
              {
                "expr": "jvm_memory_committed_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_nonheap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "commited",
                "metric": "",
                "refId": "B",
                "step": 1800
              },
              {
                "expr": "jvm_memory_max_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_nonheap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "max",
                "metric": "",
                "refId": "C",
                "step": 1800
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "$jvm_memory_pool_nonheap",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "mbytes",
              "short"
            ],
            "yaxes": [
              {
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 8,
              "x": 8,
              "y": 36
            },
            "id": 136,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "minSpan": 8,
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "repeat": null,
            "repeatIteration": 1549028060072,
            "repeatPanelId": 78,
            "scopedVars": {
              "jvm_memory_pool_nonheap": {
                "selected": false,
                "text": "Compressed Class Space",
                "value": "Compressed Class Space"
              }
            },
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_nonheap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "used",
                "metric": "",
                "refId": "A",
                "step": 1800
              },
              {
                "expr": "jvm_memory_committed_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_nonheap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "commited",
                "metric": "",
                "refId": "B",
                "step": 1800
              },
              {
                "expr": "jvm_memory_max_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_nonheap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "max",
                "metric": "",
                "refId": "C",
                "step": 1800
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "$jvm_memory_pool_nonheap",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "mbytes",
              "short"
            ],
            "yaxes": [
              {
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 8,
              "x": 16,
              "y": 36
            },
            "id": 137,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "minSpan": 8,
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "repeat": null,
            "repeatIteration": 1549028060072,
            "repeatPanelId": 78,
            "scopedVars": {
              "jvm_memory_pool_nonheap": {
                "selected": false,
                "text": "Code Cache",
                "value": "Code Cache"
              }
            },
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_nonheap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "used",
                "metric": "",
                "refId": "A",
                "step": 1800
              },
              {
                "expr": "jvm_memory_committed_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_nonheap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "commited",
                "metric": "",
                "refId": "B",
                "step": 1800
              },
              {
                "expr": "jvm_memory_max_bytes{job=\"$job\",namespace=\"$namespace\", id=\"$jvm_memory_pool_nonheap\"}",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "max",
                "metric": "",
                "refId": "C",
                "step": 1800
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "$jvm_memory_pool_nonheap",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "mbytes",
              "short"
            ],
            "yaxes": [
              {
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 43
            },
            "id": 131,
            "panels": [],
            "repeat": null,
            "title": "Garbage Collection",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "fill": 1,
            "gridPos": {
              "h": 7,
              "w": 8,
              "x": 0,
              "y": 44
            },
            "id": 98,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "rate(jvm_gc_pause_seconds_count{job=\"$job\",namespace=\"$namespace\"}[1m])",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 2,
                "legendFormat": "{{action}} ({{cause}})",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Collections",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "ops",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "fill": 1,
            "gridPos": {
              "h": 7,
              "w": 8,
              "x": 8,
              "y": 44
            },
            "id": 101,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "rate(jvm_gc_pause_seconds_sum{job=\"$job\",namespace=\"$namespace\"}[1m])/rate(jvm_gc_pause_seconds_count{job=\"$job\",namespace=\"$namespace\"}[1m])",
                "format": "time_series",
                "hide": false,
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "avg {{action}} ({{cause}})",
                "refId": "A"
              },
              {
                "expr": "jvm_gc_pause_seconds_max{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "hide": false,
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "max {{action}} ({{cause}})",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Pause Durations",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "s",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "fill": 1,
            "gridPos": {
              "h": 7,
              "w": 8,
              "x": 16,
              "y": 44
            },
            "id": 99,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "rate(jvm_gc_memory_allocated_bytes_total{job=\"$job\",namespace=\"$namespace\"}[1m])",
                "format": "time_series",
                "interval": "",
                "intervalFactor": 1,
                "legendFormat": "allocated",
                "refId": "A"
              },
              {
                "expr": "rate(jvm_gc_memory_promoted_bytes_total{job=\"$job\",namespace=\"$namespace\"}[1m])",
                "format": "time_series",
                "interval": "",
                "intervalFactor": 1,
                "legendFormat": "promoted",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Allocated/Promoted",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 51
            },
            "id": 132,
            "panels": [],
            "repeat": null,
            "title": "Classloading",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 0,
              "y": 52
            },
            "id": 37,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_classes_loaded{job=\"$job\",namespace=\"$namespace\"} or jvm_classes_loaded_classes{job=\"$job\",namespace=\"$namespace\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "loaded",
                "metric": "",
                "refId": "A",
                "step": 1200
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Classes loaded",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "short",
              "short"
            ],
            "yaxes": [
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 12,
              "y": 52
            },
            "id": 38,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "delta(jvm_classes_loaded{job=\"$job\",namespace=\"$namespace\"}[5m]) or delta(jvm_classes_loaded_classes{job=\"$job\",namespace=\"$namespace\"}[5m])",
                "format": "time_series",
                "hide": false,
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "delta",
                "metric": "",
                "refId": "A",
                "step": 1200
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Class delta (5m)",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "ops",
              "short"
            ],
            "yaxes": [
              {
                "decimals": null,
                "format": "short",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 59
            },
            "id": 133,
            "panels": [],
            "repeat": null,
            "title": "Buffer Pools",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 0,
              "y": 60
            },
            "id": 33,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_buffer_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", id=\"direct\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "used",
                "metric": "",
                "refId": "A",
                "step": 2400
              },
              {
                "expr": "jvm_buffer_total_capacity_bytes{job=\"$job\",namespace=\"$namespace\", id=\"direct\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "capacity",
                "metric": "",
                "refId": "B",
                "step": 2400
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Direct Buffers",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "short",
              "short"
            ],
            "yaxes": [
              {
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 6,
              "y": 60
            },
            "id": 83,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_buffer_count{job=\"$job\",namespace=\"$namespace\", id=\"direct\"} or jvm_buffer_count_buffers{job=\"$job\",namespace=\"$namespace\", id=\"direct\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "count",
                "metric": "",
                "refId": "A",
                "step": 2400
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Direct Buffers",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "short",
              "short"
            ],
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 12,
              "y": 60
            },
            "id": 85,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_buffer_memory_used_bytes{job=\"$job\",namespace=\"$namespace\", id=\"mapped\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "used",
                "metric": "",
                "refId": "A",
                "step": 2400
              },
              {
                "expr": "jvm_buffer_total_capacity_bytes{job=\"$job\",namespace=\"$namespace\", id=\"mapped\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "capacity",
                "metric": "",
                "refId": "B",
                "step": 2400
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Mapped Buffers",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "short",
              "short"
            ],
            "yaxes": [
              {
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "editable": true,
            "error": false,
            "fill": 1,
            "grid": {
              "leftLogBase": 1,
              "leftMax": null,
              "leftMin": null,
              "rightLogBase": 1,
              "rightMax": null,
              "rightMin": null
            },
            "gridPos": {
              "h": 7,
              "w": 6,
              "x": 18,
              "y": 60
            },
            "id": 84,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "jvm_buffer_count{job=\"$job\",namespace=\"$namespace\", id=\"mapped\"} or jvm_buffer_count_buffers{job=\"$job\",namespace=\"$namespace\", id=\"mapped\"}",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "count",
                "metric": "",
                "refId": "A",
                "step": 2400
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Mapped Buffers",
            "tooltip": {
              "msResolution": false,
              "shared": true,
              "sort": 0,
              "value_type": "cumulative"
            },
            "type": "graph",
            "x-axis": true,
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "y-axis": true,
            "y_formats": [
              "short",
              "short"
            ],
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": 0,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 67
            },
            "id": 135,
            "panels": [],
            "title": "JDBC",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "fill": 1,
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 0,
              "y": 68
            },
            "id": 137,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "dataSource_connections_active{namespace=\"$namespace\",job=\"$job\"}",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "active",
                "refId": "C"
              },
              {
                "expr": "dataSource_connections_max{namespace=\"$namespace\",job=\"$job\"}",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "max",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Database connections",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "refresh": "1m",
        "schemaVersion": 16,
        "style": "dark",
        "tags": [],
        "templating": {
          "list": [
            {
              "allValue": null,
              "current": {
                "selected": true,
                "text": "syndesis-meta",
                "value": "syndesis-meta"
              },
              "hide": 0,
              "includeAll": false,
              "label": "Application",
              "multi": false,
              "name": "job",
              "options": [
                {
                  "selected": true,
                  "text": "syndesis-meta",
                  "value": "syndesis-meta"
                },
                {
                  "selected": false,
                  "text": "syndesis-server",
                  "value": "syndesis-server"
                }
              ],
              "query": "syndesis-meta, syndesis-server",
              "skipUrlSync": false,
              "type": "custom"
            },
            {
              "allValue": null,
              "current": {},
              "datasource": "Prometheus",
              "definition": "label_values(up{service=\"$job\"}, namespace)",
              "hide": 0,
              "includeAll": false,
              "label": "Namespace",
              "multi": false,
              "name": "namespace",
              "options": [],
              "query": "label_values(up{service=\"$job\"}, namespace)",
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 1,
              "tagValuesQuery": "",
              "tags": [],
              "tagsQuery": "",
              "type": "query",
              "useTags": false
            },
            {
              "allFormat": "glob",
              "allValue": null,
              "current": {
                "text": "All",
                "value": "$__all"
              },
              "datasource": "Prometheus",
              "definition": "label_values(jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\",area=\"heap\"},id)",
              "hide": 0,
              "includeAll": true,
              "label": "JVM Memory Pools Heap",
              "multi": false,
              "multiFormat": "glob",
              "name": "jvm_memory_pool_heap",
              "options": [],
              "query": "label_values(jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\",area=\"heap\"},id)",
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 1,
              "tagValuesQuery": "",
              "tags": [],
              "tagsQuery": "",
              "type": "query",
              "useTags": false
            },
            {
              "allFormat": "glob",
              "allValue": null,
              "current": {
                "text": "All",
                "value": "$__all"
              },
              "datasource": "Prometheus",
              "definition": "label_values(jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\",area=\"nonheap\"},id)",
              "hide": 0,
              "includeAll": true,
              "label": "JVM Memory Pools Non-Heap",
              "multi": false,
              "multiFormat": "glob",
              "name": "jvm_memory_pool_nonheap",
              "options": [],
              "query": "label_values(jvm_memory_used_bytes{job=\"$job\",namespace=\"$namespace\",area=\"nonheap\"},id)",
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 2,
              "tagValuesQuery": "",
              "tags": [],
              "tagsQuery": "",
              "type": "query",
              "useTags": false
            }
          ]
        },
        "time": {
          "from": "now-6h",
          "to": "now"
        },
        "timepicker": {
          "now": true,
          "refresh_intervals": [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
          ],
          "time_options": [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
          ]
        },
        "timezone": "browser",
        "title": "Fuse Online - Infrastructure - JVMs",
        "uid": "n94xx7lma",
        "version": 11
      }
      
    syndesis-rest-api-dashboard.json: |
      {
        "annotations": {
          "list": [
            {
              "builtIn": 1,
              "datasource": "-- Grafana --",
              "enable": true,
              "hide": true,
              "iconColor": "rgba(0, 211, 255, 1)",
              "name": "Annotations & Alerts",
              "type": "dashboard"
            }
          ]
        },
        "editable": true,
        "gnetId": null,
        "graphTooltip": 0,
        "id": 5,
        "iteration": 1549550334826,
        "links": [],
        "panels": [
          {
            "collapsed": false,
            "gridPos": {
              "h": 1,
              "w": 24,
              "x": 0,
              "y": 0
            },
            "id": 2,
            "panels": [],
            "repeat": "uri",
            "title": "[[uri]]",
            "type": "row"
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "fill": 1,
            "gridPos": {
              "h": 9,
              "w": 12,
              "x": 0,
              "y": 1
            },
            "id": 12,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": false,
              "hideEmpty": false,
              "hideZero": false,
              "max": false,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "repeat": null,
            "repeatDirection": "h",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "sum(rate(http_server_requests_seconds_count{namespace=\"$namespace\",job=\"$job\",uri=\"$uri\"}[5m]))",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "requests per second",
                "refId": "A"
              },
              {
                "expr": "sum(rate(http_server_requests_seconds_count{namespace=\"$namespace\",job=\"$job\",uri=\"$uri\",status!~\"2..\"}[5m]))",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "errors per second",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Requests per second",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "transparent": false,
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": "Prometheus",
            "fill": 0,
            "gridPos": {
              "h": 9,
              "w": 12,
              "x": 12,
              "y": 1
            },
            "id": 13,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": false,
              "hideEmpty": false,
              "hideZero": false,
              "max": false,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "nullPointMode": "null",
            "percentage": false,
            "pointradius": 5,
            "points": false,
            "renderer": "flot",
            "repeatDirection": "h",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "expr": "(sum(rate(http_server_requests_seconds_sum{namespace=\"$namespace\",job=\"$job\",uri=\"$uri\"}[5m])) / sum(rate(http_server_requests_seconds_count{namespace=\"$namespace\",job=\"$job\",uri=\"$uri\"}[5m]))) * 1000",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 1,
                "legendFormat": "average",
                "refId": "A"
              },
              {
                "expr": "histogram_quantile(0.5, sum(rate(http_server_requests_seconds_bucket{namespace=\"$namespace\",job=\"$job\",uri=\"$uri\"}[5m])) by (le)) * 1000",
                "format": "time_series",
                "hide": false,
                "intervalFactor": 1,
                "legendFormat": "50th percentile",
                "refId": "C"
              },
              {
                "expr": "histogram_quantile(0.90, sum(rate(http_server_requests_seconds_bucket{namespace=\"$namespace\",job=\"$job\",uri=\"$uri\"}[5m])) by (le)) * 1000",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "90th percentile",
                "refId": "B"
              },
              {
                "expr": "histogram_quantile(1, sum(rate(http_server_requests_seconds_bucket{namespace=\"$namespace\",job=\"$job\",uri=\"$uri\"}[5m])) by (le)) * 1000",
                "format": "time_series",
                "intervalFactor": 1,
                "legendFormat": "max",
                "refId": "E"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Latency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "transparent": false,
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 0,
                "format": "ms",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "refresh": "1m",
        "schemaVersion": 16,
        "style": "dark",
        "tags": [],
        "templating": {
          "list": [
            {
              "allValue": null,
              "current": {
                "isNone": true,
                "text": "None",
                "value": ""
              },
              "datasource": "Prometheus",
              "definition": "label_values(up{service=\"$job\"}, namespace)",
              "hide": 0,
              "includeAll": false,
              "label": "Namespace",
              "multi": false,
              "name": "namespace",
              "options": [],
              "query": "label_values(up{service=\"$job\"}, namespace)",
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 1,
              "tagValuesQuery": "",
              "tags": [],
              "tagsQuery": "",
              "type": "query",
              "useTags": false
            },
            {
              "allValue": null,
              "current": {
                "tags": [],
                "text": "syndesis-meta",
                "value": "syndesis-meta"
              },
              "hide": 0,
              "includeAll": false,
              "label": "Application",
              "multi": false,
              "name": "job",
              "options": [
                {
                  "selected": true,
                  "text": "syndesis-meta",
                  "value": "syndesis-meta"
                },
                {
                  "selected": false,
                  "text": "syndesis-server",
                  "value": "syndesis-server"
                }
              ],
              "query": "syndesis-meta, syndesis-server",
              "skipUrlSync": false,
              "type": "custom"
            },
            {
              "allValue": null,
              "current": {
                "text": "All",
                "value": [
                  "$__all"
                ]
              },
              "datasource": "Prometheus",
              "definition": "label_values(http_server_requests_seconds_count{job=\"$job\"}, uri)",
              "hide": 2,
              "includeAll": true,
              "label": "Resource",
              "multi": true,
              "name": "uri",
              "options": [],
              "query": "label_values(http_server_requests_seconds_count{job=\"$job\"}, uri)",
              "refresh": 1,
              "regex": "",
              "skipUrlSync": false,
              "sort": 1,
              "tagValuesQuery": "",
              "tags": [],
              "tagsQuery": "",
              "type": "query",
              "useTags": false
            }
          ]
        },
        "time": {
          "from": "now-6h",
          "to": "now"
        },
        "timepicker": {
          "refresh_intervals": [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
          ],
          "time_options": [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
          ]
        },
        "timezone": "",
        "title": "Fuse Online - Infrastructure - REST APIs",
        "uid": "YPnPk0lik",
        "version": 57
      }
      


- apiVersion: v1
  kind: Service
  metadata:
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
    name: syndesis-grafana
    namespace: ${MONITORING_NAMESPACE}
  spec:
    ports:
    - name: grafana
      port: 80
      protocol: TCP
      targetPort: 3000
    selector:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/component: syndesis-grafana
  status:
    loadBalancer: {}

- apiVersion: v1
  kind: Route
  metadata:
    name: syndesis-grafana
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  spec:
    to:
      name: syndesis-grafana

- apiVersion: v1
  kind: DeploymentConfig
  metadata:
    name: syndesis-grafana
    namespace: ${MONITORING_NAMESPACE}
    labels:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/type: infrastructure
      syndesis.io/component: syndesis-monitoring
  spec:
    replicas: 1
    selector:
      app: syndesis
      syndesis.io/app: syndesis
      syndesis.io/component: syndesis-grafana
    strategy:
      type: Recreate
      resources:
        limits:
          memory: "256Mi"
        requests:
          memory: "20Mi"
    template:
      metadata:
        labels:
          app: syndesis
          syndesis.io/app: syndesis
          syndesis.io/type: infrastructure
          syndesis.io/component: syndesis-grafana
      spec:
        containers:
        - name: grafana
          imagePullPolicy: IfNotPresent
          image: grafana:latest
          env:
          - name: GF_AUTH_ANONYMOUS_ENABLED
            value: 'true'
          - name: GF_AUTH_BASIC_ENABLED
            value: 'false'
          - name: GF_AUTH_PROXY_ENABLED
            value: 'false'
          - name: GF_AUTH_DISABLE_LOGIN_FORM
            value: 'true'
          - name: GF_USERS_ALLOW_SIGN_UP
            value: 'false'
          livenessProbe:
            failureThreshold: 3
            httpGet:
              port: 3000
            initialDelaySeconds: 180
          readinessProbe:
            failureThreshold: 3
            httpGet:
              port: 3000
            initialDelaySeconds: 10
          volumeMounts:
          - mountPath: /etc/grafana/provisioning/datasources
            name: syndesis-grafana-datasource
          - mountPath: /etc/grafana/provisioning/dashboards
            name: syndesis-grafana-dashboard
        restartPolicy: Always
        volumes:
        - name: syndesis-grafana-datasource
          configMap:
            name: syndesis-grafana-datasource-config
        - name: syndesis-grafana-dashboard
          configMap:
            name: syndesis-grafana-dashboard-config
    triggers:
    - imageChangeParams:
        automatic: true
        containerNames:
        - grafana
        from:
          kind: ImageStreamTag
          name: grafana:latest
          namespace: ${MONITORING_NAMESPACE}
      type: ImageChange
    - type: ConfigChange
